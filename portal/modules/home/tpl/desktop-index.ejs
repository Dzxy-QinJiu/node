<% // 页头1           %>
<% addBrowserChecker = false %>
<% title = '客套'%>
<% include ../../common/public/tpl/common-header.begin.ejs %>
<style>
    * {
        box-sizing: border-box;
    }

    .index-loading.load8 {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        margin: auto;
        display: flex;
        align-items: center;
        flex-direction: column;
        justify-content: center;
    }
    .load8 {
        text-align: center;
        position: absolute;
        top: 45%;
        left: 50%;
    }
    .index-loading.load8 .loader8-content{
        position: relative;
    }
    .index-loading.load8 .loader8-inner {
        position: absolute;
        top: calc(50% - 30px);
        left: calc(50% - 15px);
        width: 30px;
        height: 30px;
    }
    .index-loading.load8 .loader8-inner img{
        width: 30px;
        height: 30px;
    }
    .index-loading.load8 .loader8-text{
        margin-top: 10px;
        color: #333;
        font-size: 14px;
    }

    .load8 .loader8 {
        margin: auto;
        font-size: 10px;
        position: relative;
        text-indent: -9999em;
        border-top: 0.35em solid #D3EAFD;
        border-right: 0.35em solid #D3EAFD;
        border-bottom: 0.35em solid #D3EAFD;
        border-left: 0.35em solid #1976D2;
        animation: load8 0.5s infinite linear;
    }

    .load8 .loader8,
    .load8 .loader8:after {
        border-radius: 50%;
        width: 6em;
        height: 6em;
    }

    @keyframes load8 {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }

    @keyframes line-spin {
        50% {
            opacity: 0.3;
        }

        100% {
            opacity: 1;
        }
    }
</style>
<script type="text/javascript">
    if (self != top) {
        top.location = self.location;
    }

    Oplate = {
        isProduction: '<%= locals.isProduction %>',
        webpackMode: '<%= locals.webpackMode %>',
        lang: '<%= lang %>',
        hideSomeItem: '<%- hideSomeItem %>',
        projectName: '<%= projectName %>',
        clientId: '<%- clientId %>',
        useSso: '<%- useSso %>',
        isCurtao: '<%- isCurtao %>',
        productsIdMap: '<%- productsIdMap %>',
        ssoUrl: '<%- ssoUrl %>',
        antmeActorUrl: '<%- antmeActorUrl %>',
        antmeClientId: '<%- antmeClientId %>',
        forceLogin: '<%- forceLogin %>',
        showWelComePage: '<%- showWelComePage %>'
    };
</script>
<script type="text/javascript">
    if (typeof String.prototype.startsWith !== 'function') {
        String.prototype.startsWith = function(prefix) {
            return this.slice(0, prefix.length) === prefix;
        };
    }
</script>
<% if(isFormal == "true") { %>
<!-- Piwik -->
<script type="text/javascript">
    var _paq = _paq || [];
    // tracker methods like "setCustomDimension" should be called before "trackPageView"
    _paq.push(['setUserId', '<%= username %>']);
    _paq.push(['setCustomDimension', 1, '<%= userid %>']);
    _paq.push(['setCustomDimension', 2, '<%= username %>']);
    /*用户昵称*/
    _paq.push(['setCustomVariable', '1', 'nickname', '<%= nickname %>', 'visit']);
    /*用户角色*/
    _paq.push(['setCustomVariable', '2', 'role', '<%= role %>', 'visit']);
    /*用户所在单位*/
    _paq.push(['setCustomVariable', '3', 'organization', '<%= organization %>', 'visit']);
    _paq.push(['setDocumentTitle', '/']);
    _paq.push(['trackPageView']);
    _paq.push(['enableHeartBeatTimer', 30]);
    (function() {
        var u = '//ustat.antfact.com/';
        _paq.push(['setTrackerUrl', u + 'piwik.php']);
        _paq.push(['setSiteId', '<%= siteID %>']);
        var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
        g.type = 'text/javascript';
        g.async = true;
        g.defer = true;
        g.src = u + 'piwik.js';
        s.parentNode.insertBefore(g, s);
    })();
</script>
<!-- End Piwik Code -->
<% } %>
<% // 页头2               %>
<% include ../../common/public/tpl/common-header.end.ejs %>
<% // 主页里边是否展示欢迎页                %>
<% if(showWelComePage) { %>
    <style>
        .welcome-page-container{
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: #E3E8ED;
            z-index: 1111;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .welcome-page-container .welcome-page-content{
            width: 482px;
            background: #F8F9FB;
            border-radius:4px;
            box-shadow: 0 0 10px 0px #ccc;
        }
        .welcome-page-container .welcome-page-title{
            height: 89px;
            background: #fff;
            font-size: 16px;
            color: #333;
            position: relative;
            display: flex;
            align-items: center;
        }
        .welcome-page-container .welcome-img-wrapper {
            width: 56px;
            height: 56px;
            margin: 0 16px;
            border-radius: 50%;
            background-color: #E8EEF3;
            overflow: hidden;
        }
        .welcome-page-container .welcome-page-title .image{
            width: 100%;
            height: 100%;
        }
        .welcome-page-container .welcome-page-title .welcome-close-btn{
            padding: 0 20px;
            position: absolute;
            right: 0;
        }
        .welcome-page-container .welcome-page-title .btn-primary{
            padding: 0 15px;
            border-radius: 5px;
            background-color: #1976D2;
            color: #ffffff;
            cursor: pointer;
            transition: 0.3s;
            outline: none;
            font-size: 14px;
            border: 1px solid transparent;
            white-space: nowrap;
            line-height: 1.15;
            height: 28px;
        }
        .welcome-page-container .welcome-page-title .btn-primary:hover{
            background-color: #1564C0;
        }
        .welcome-page-container .welcome-page-info-content{
            text-align: center;
            color: #1976D2;
            font-size: 20px;
            margin: 48px 0;
        }
        .welcome-page-container .welcome-page-info-content img{
            width: 128px;
            height: 128px;
            margin: auto auto 18px auto;
        }
    </style>
    <div id="welcome-page" class="welcome-page-container">
        <div class="welcome-page-content">
            <div class="welcome-page-title">
                <div class="welcome-img-wrapper">
                    <img class="image" src="/static/images/curtao-personal.svg"/>
                </div>
                <span><%= welcomePageInfo.title %></span>
                <div class="welcome-close-btn" title="<%= welcomePageInfo.closeText %>" onclick="handleCloseWelComePage()">
                    <button type="button" class="btn-primary"><span><%= welcomePageInfo.closeText %></span></button>
                </div>
            </div>
            <div class="welcome-page-info-content">
                <img src="/static/images/curtao-wx-qrcdoe.jpg"/>
                <div><%= welcomePageInfo.content %></div>
            </div>
        </div>
    </div>
    <script>
        console.log(new Date())
        window.handleCloseWelComePage = function() {
            var welComePageEl = document.getElementById("welcome-page");
            if(welComePageEl) {
                if (typeof _paq === 'object') {
                    _paq.push(['trackEvent', '欢迎页面', 'clicked', '点击进入系统按钮']);
                }
                document.body.removeChild(welComePageEl);
            }
        }
    </script>
<% } %>
<div id="app">
    <div class="load8 index-loading">
        <div class="loader8-content">
            <div class="loader8-inner">
                <img src="/static/images/logo.png"/>
            </div>
            <div class="loader8"></div>
            <div class="loader8-text"><%= loadingText %></div>
        </div>
    </div>
</div>
<script src="/dll/dll.vendor.js?timestamp=<%= timeStamp %>"></script>
<script src="/dll/dll.reactRel.js?timestamp=<%= timeStamp %>"></script>
<script src="/dll/dll.china.js?timestamp=<%= timeStamp %>"></script>
<script src="/dll/dll.province.js?timestamp=<%= timeStamp %>"></script>
<script src="/dll/dll.echarts.js?timestamp=<%= timeStamp %>"></script>
<script src="/resources/common.bundle.js?timestamp=<%= timeStamp %>"></script>
<script src="/resources/app.bundle.js?timestamp=<%= timeStamp %>"></script>
<% // 页脚                %>
<% showFooterContent = false %>
<% // 主页里边展示客服                %>
<% show_custom_service = true %>
<% include ../../common/public/tpl/common-footer.ejs %>
